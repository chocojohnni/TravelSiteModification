@model TravelSiteModification.Models.CarDetailViewModel
@{
    ViewData["Title"] = "Car Details";
}

<a asp-action="Index" class="btn btn-outline-secondary mb-3">← Back to Search Results</a>

<h2 class="text-primary mb-4">Selected Car & Agency Details</h2>

<div class="row">
    <!-- LEFT COLUMN: CAR INFO -->
    <div class="col-md-5">
        <h3 class="fs-5 fw-bold text-dark border-bottom pb-2">
            Car Model: @Model.CarModel
        </h3>

        <img src="@Model.ImagePath"
             class="img-fluid rounded mb-3"
             style="max-height: 200px;" />

        <p><strong>Car Type:</strong> @Model.CarType</p>
        <p><strong>Price/Day:</strong> @Model.PricePerDay.ToString("C")</p>
        <p><strong>Car ID:</strong> @Model.CarID</p>

        <form method="post" asp-controller="CarBooking" asp-action="StartBooking">
            <input type="hidden" name="carId" value="@Model.CarID" />
            <button class="btn btn-success btn-lg w-100 mt-3">Book This Car</button>
        </form>
    </div>

    <!-- RIGHT COLUMN: AGENCY & OTHER CARS -->
    <div class="col-md-7">
        <h3 class="fs-5 fw-bold text-dark border-bottom pb-2">
            Rental Agency Information
        </h3>

        <p><strong>Agency:</strong> @Model.AgencyName</p>
        <p><strong>Phone:</strong> @Model.AgencyPhone</p>
        <p><strong>Email:</strong> @Model.AgencyEmail</p>

        <h3 class="fs-5 fw-bold text-dark mt-4 border-bottom pb-2">
            Other Available Cars from this Agency
        </h3>

        @if (Model.OtherAgencyCars.Count == 0)
        {
            <p class="text-muted">No other available cars from this agency.</p>
        }
        else
        {
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>Model</th>
                        <th>Type</th>
                        <th>Price/Day</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var car in Model.OtherAgencyCars)
                    {
                        <tr>
                            <td>@car.CarModel</td>
                            <td>@car.CarType</td>
                            <td>@car.PricePerDay.ToString("C")</td>
                            <td>
                                <a asp-action="Details"
                                   asp-route-carId="@car.CarID"
                                   asp-route-agencyId="@car.AgencyID"
                                   class="btn btn-outline-info btn-sm">
                                    View Details
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
</div>
